# ğŸ—ï¸ Product Management System - Architecture

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER INTERFACES                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚                                   â”‚
â”‚  ğŸ‘¨â€ğŸ’¼ ADMIN PANEL                  â”‚  ğŸ‘¥ PUBLIC WEBSITE                â”‚
â”‚  (dimond-castle-admin-v2)       â”‚  (dimond-castle-web)              â”‚
â”‚  Port: 3000                     â”‚  Port: 3001                       â”‚
â”‚                                 â”‚                                   â”‚
â”‚  ğŸ“‹ Product List                â”‚  ğŸ  Homepage                       â”‚
â”‚  â• Create Product               â”‚     â””â”€ Products Section           â”‚
â”‚  âœï¸  Edit Product                â”‚  ğŸ“¦ Product Pages                 â”‚
â”‚  ğŸ‘ï¸  Preview Product             â”‚     â””â”€ /products/[slug]           â”‚
â”‚  ğŸ—‘ï¸  Delete Product              â”‚                                   â”‚
â”‚                                 â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                                    â”‚
             â”‚ HTTP Requests                      â”‚ HTTP Requests
             â”‚ (CRUD Operations)                  â”‚ (Read Only)
             â”‚                                    â”‚
             â†“                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ”Œ REST API                                  â”‚
â”‚                    (dimond-castle-api)                               â”‚
â”‚                         Port: 4000                                   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    API ENDPOINTS                            â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  PUBLIC (No Auth)                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET  /api/products/public          (List products)    â”‚   â”‚
â”‚  â”‚  â””â”€ GET  /api/products/public/:slug    (Get by slug)      â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  ADMIN (Auth Required)                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET    /api/products                (List all)         â”‚   â”‚
â”‚  â”‚  â”œâ”€ GET    /api/products/:id            (Get by ID)        â”‚   â”‚
â”‚  â”‚  â”œâ”€ POST   /api/products                (Create)           â”‚   â”‚
â”‚  â”‚  â”œâ”€ PUT    /api/products/:id            (Update)           â”‚   â”‚
â”‚  â”‚  â”œâ”€ DELETE /api/products/:id            (Delete)           â”‚   â”‚
â”‚  â”‚  â”œâ”€ POST   /api/products/bulk/reorder   (Reorder)          â”‚   â”‚
â”‚  â”‚  â””â”€ GET    /api/products/meta/categories (Categories)      â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    MIDDLEWARE                               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  âœ“ CORS                    âœ“ Rate Limiting                 â”‚   â”‚
â”‚  â”‚  âœ“ Helmet (Security)       âœ“ Compression                   â”‚   â”‚
â”‚  â”‚  âœ“ Body Parser             âœ“ Morgan (Logging)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    VALIDATION                               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  ğŸ“‹ Zod Schemas                                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ createProductSchema                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ updateProductSchema                                    â”‚   â”‚
â”‚  â”‚  â””â”€ productQuerySchema                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Mongoose ODM
                               â”‚
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ’¾ DATABASE LAYER                               â”‚
â”‚                         MongoDB                                      â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  PRODUCT COLLECTION                         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  ğŸ“„ Product Schema                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ _id: ObjectId                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ slug: String (indexed, unique)                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ status: "draft" | "published" (indexed)               â”‚   â”‚
â”‚  â”‚  â”œâ”€ sku: String                                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ price: { amount, currency }                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ sizes: String[]                                        â”‚   â”‚
â”‚  â”‚  â”œâ”€ category: String (indexed)                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ tags: String[]                                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ featured: Boolean (indexed)                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ coverPublicId: String                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ galleryPublicIds: String[]                             â”‚   â”‚
â”‚  â”‚  â”œâ”€ inStock: Boolean                                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ stockQuantity: Number                                  â”‚   â”‚
â”‚  â”‚  â”œâ”€ en: LocaleContent                                      â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ name: String (text indexed)                        â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ description: String                                â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ origin: String                                     â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€ seo: { title, description, ogImage }              â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€ sections: Section[]                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ ar: LocaleContent (same structure)                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ viewCount: Number                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ order: Number (indexed)                                â”‚   â”‚
â”‚  â”‚  â”œâ”€ createdAt: Date                                        â”‚   â”‚
â”‚  â”‚  â””â”€ updatedAt: Date                                        â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â”‚  ğŸ” Indexes:                                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ slug (unique)                                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ status                                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€ { status, featured, order }                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ { category, status }                                   â”‚   â”‚
â”‚  â”‚  â””â”€ text index on { en.name, ar.name }                    â”‚   â”‚
â”‚  â”‚                                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ External Service
                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     â˜ï¸  CLOUDINARY (Media Storage)                   â”‚
â”‚                                                                      â”‚
â”‚  ğŸ“¸ Product Images                                                  â”‚
â”‚  â”œâ”€ Cover Images                                                    â”‚
â”‚  â”œâ”€ Gallery Images                                                  â”‚
â”‚  â””â”€ Automatic Transformations (resize, crop, optimize)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Architecture

### Admin Panel Components

```
src/app/admin/products/
â”œâ”€â”€ page.tsx                          # Product List
â”‚   â””â”€â”€ Uses: ProductsTable, SearchBar, Filters
â”œâ”€â”€ new/
â”‚   â””â”€â”€ page.tsx                      # Create Product Form
â”œâ”€â”€ [id]/
â”‚   â””â”€â”€ page.tsx                      # Edit Product Page
â”‚       â””â”€â”€ Uses: ProductEditor
â””â”€â”€ preview/[id]/
    â””â”€â”€ page.tsx                      # Product Preview

src/components/products/
â””â”€â”€ ProductEditor.tsx                 # Main Editor Component
    â”œâ”€â”€ Tabs:
    â”‚   â”œâ”€â”€ Product Details
    â”‚   â”‚   â”œâ”€â”€ Basic Info (name, description, origin)
    â”‚   â”‚   â”œâ”€â”€ Pricing & Inventory
    â”‚   â”‚   â”œâ”€â”€ Categories & Tags
    â”‚   â”‚   â”œâ”€â”€ Sizes
    â”‚   â”‚   â””â”€â”€ Media (cover + gallery)
    â”‚   â”œâ”€â”€ Page Builder
    â”‚   â”‚   â””â”€â”€ SectionsList (reused from pages)
    â”‚   â””â”€â”€ SEO
    â”‚       â””â”€â”€ Meta tags per language
    â””â”€â”€ Info Panel
        â”œâ”€â”€ Product Stats
        â””â”€â”€ Danger Zone (delete)
```

### Website Components

```
app/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ Products.tsx                  # Products Section (Homepage)
â”‚       â”œâ”€â”€ Fetches from API
â”‚       â”œâ”€â”€ Loading State
â”‚       â”œâ”€â”€ Product Cards Grid
â”‚       â””â”€â”€ Links to Product Pages
â””â”€â”€ products/
    â””â”€â”€ [slug]/
        â””â”€â”€ page.tsx                  # Individual Product Page
            â”œâ”€â”€ Hero Section
            â”œâ”€â”€ Product Details
            â”œâ”€â”€ Image Gallery
            â””â”€â”€ Custom Page Builder Sections
```

## Data Flow Diagrams

### Creating a Product

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Admin     â”‚
â”‚   Panel     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Fill form
       â”‚    (name, description, etc.)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Product  â”‚
â”‚     Page        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. POST /api/products
       â”‚    { en: {...}, ar: {...} }
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Server    â”‚
â”‚  Validation     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Validate with Zod
       â”‚    Check slug uniqueness
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MongoDB      â”‚
â”‚  Insert Doc     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Return created product
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Redirect to   â”‚
â”‚  Edit Product   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Viewing Products on Website

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Website   â”‚
â”‚  Homepage   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Component mounts
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Products.tsx    â”‚
â”‚  useEffect      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. GET /api/products/public
       â”‚    ?limit=6&sort=order
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Server    â”‚
â”‚  Query DB       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. Find published products
       â”‚    Sort by order
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    MongoDB      â”‚
â”‚  Return docs    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Return products array
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Render Cards   â”‚
â”‚  with Images    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Editing a Product

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Admin     â”‚
â”‚   Panel     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Click Edit
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /products/:idâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Load product data
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProductEditor   â”‚
â”‚  Component      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. User edits fields
       â”‚    (name, price, images, etc.)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Local State    â”‚
â”‚  (hasChanges)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 4. Click Save
       â”‚    PUT /api/products/:id
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Server    â”‚
â”‚  Update DB      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 5. Return updated product
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update UI       â”‚
â”‚ Clear changes   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Framework:        Next.js 16 (App Router)                  â”‚
â”‚  Language:         TypeScript                               â”‚
â”‚  UI Library:       React 19                                 â”‚
â”‚  Styling:          Tailwind CSS 4                           â”‚
â”‚  Components:       Radix UI (shadcn/ui)                     â”‚
â”‚  State:            React Query (TanStack Query)             â”‚
â”‚  Forms:            React Hook Form + Zod                    â”‚
â”‚  Icons:            Lucide React                             â”‚
â”‚  Notifications:    Sonner                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Runtime:          Node.js                                  â”‚
â”‚  Framework:        Express 5                                â”‚
â”‚  Language:         TypeScript                               â”‚
â”‚  Database:         MongoDB                                  â”‚
â”‚  ODM:              Mongoose                                 â”‚
â”‚  Validation:       Zod                                      â”‚
â”‚  Security:         Helmet, CORS                             â”‚
â”‚  Logging:          Morgan                                   â”‚
â”‚  Media:            Cloudinary                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. Input Validation                                        â”‚
â”‚     â””â”€ Zod schemas validate all inputs                      â”‚
â”‚                                                              â”‚
â”‚  2. Database Security                                       â”‚
â”‚     â”œâ”€ Mongoose schema validation                           â”‚
â”‚     â”œâ”€ Unique constraints on slugs                          â”‚
â”‚     â””â”€ Indexed fields for performance                       â”‚
â”‚                                                              â”‚
â”‚  3. API Security                                            â”‚
â”‚     â”œâ”€ Helmet (security headers)                            â”‚
â”‚     â”œâ”€ CORS configuration                                   â”‚
â”‚     â”œâ”€ Rate limiting                                        â”‚
â”‚     â””â”€ Authentication placeholders (TODO)                   â”‚
â”‚                                                              â”‚
â”‚  4. Data Sanitization                                       â”‚
â”‚     â”œâ”€ Slug validation (lowercase, alphanumeric, hyphens)   â”‚
â”‚     â””â”€ XSS prevention through React                         â”‚
â”‚                                                              â”‚
â”‚  5. Error Handling                                          â”‚
â”‚     â”œâ”€ Try-catch blocks                                     â”‚
â”‚     â”œâ”€ Proper error messages                                â”‚
â”‚     â””â”€ No sensitive data in errors                          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Optimizations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PERFORMANCE FEATURES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Database:                                                  â”‚
â”‚  â”œâ”€ Indexed fields (slug, status, category, featured)       â”‚
â”‚  â”œâ”€ Text search index on product names                      â”‚
â”‚  â”œâ”€ Compound indexes for common queries                     â”‚
â”‚  â””â”€ Lean queries (plain objects, not Mongoose docs)         â”‚
â”‚                                                              â”‚
â”‚  API:                                                       â”‚
â”‚  â”œâ”€ Compression middleware                                  â”‚
â”‚  â”œâ”€ Pagination support                                      â”‚
â”‚  â””â”€ Selective field projection                              â”‚
â”‚                                                              â”‚
â”‚  Frontend:                                                  â”‚
â”‚  â”œâ”€ React Query caching                                     â”‚
â”‚  â”œâ”€ Next.js revalidation (60s)                              â”‚
â”‚  â”œâ”€ Image optimization (Cloudinary transformations)         â”‚
â”‚  â”œâ”€ Code splitting (dynamic imports)                        â”‚
â”‚  â””â”€ Loading states for better UX                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Scalability

The architecture is designed to scale:

1. **Horizontal Scaling**: API can run on multiple servers
2. **Database Sharding**: MongoDB supports sharding by category/region
3. **CDN**: Cloudinary provides global CDN for images
4. **Caching**: Ready for Redis integration
5. **Microservices**: Products module is independent
6. **Load Balancing**: Standard Express app, works with any LB

## Monitoring & Observability

Future enhancements:
- Request logging (Morgan already in place)
- Error tracking (Sentry integration ready)
- Performance monitoring (New Relic, DataDog)
- Database monitoring (MongoDB Atlas built-in)
- API analytics (track popular products, search terms)

---

This architecture provides a solid foundation for a production-ready product management system! ğŸš€

